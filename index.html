<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BlurPad Web</title>
  <link rel="stylesheet" href="./styles.css" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1653119848077016"
     crossorigin="anonymous"></script>
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="dot"></div>
        <div>
          <div class="title" data-i18n="app_title">BlurPad</div>
          <div class="sub" data-i18n="app_subtitle">同圖雙層：背景 Blur、前景置中</div>
        </div>
      </div>

      <div class="actions">
        <select id="langSelect" class="btn">
          <option value="zh-TW">繁體中文</option>
          <option value="en">English</option>
        </select>

        <button id="btnPickFolder" class="btn" data-i18n="batch_pick">選擇資料夾</button>
        <button id="btnRunBatch" class="btn primary" disabled data-i18n="run_batch">批次輸出 ZIP</button>
      </div>
    </header>

    <main class="grid">
      <!-- 左：批次（選用） -->
      <section class="card batch">
        <h3>
          <span data-i18n="batch_title">批次處理</span>
          <span class="tag" data-i18n="optional">選用</span>
        </h3>

        <div class="desc" data-i18n="batch_desc">
          用於一次處理整個資料夾<br/>
          一般情況請使用右側「即時預覽」
        </div>

        <div id="dropFolder" class="drop">
          <div class="dropText" data-i18n="batch_drop">拖曳資料夾到這裡</div>
          <div class="dropHint" data-i18n="batch_hint">或使用右上角按鈕</div>
        </div>

        <div class="row">
          <div class="label" data-i18n="batch_folder">資料夾</div>
          <div id="folderPath" class="mono muted">（尚未選擇）</div>
        </div>

        <div class="row">
          <div class="label" data-i18n="batch_count">數量</div>
          <div id="batchCount" class="mono muted">0</div>
        </div>

        <div class="row">
          <div class="label" data-i18n="batch_output">輸出</div>
          <div class="mono muted"><span data-i18n="batch_output_desc">打包成 ZIP 下載</span></div>
        </div>

        <!-- 隱藏的資料夾選擇器 -->
        <input id="folderInput" type="file" webkitdirectory multiple hidden />
      </section>

      <!-- 中：參數 -->
      <section class="card">
        <h3 data-i18n="params_title">參數</h3>

        <div class="paramActions">
          <button id="btnReset" class="btn" data-i18n="reset">重置</button>
        </div>

        <div class="form">
          <div class="field">
            <label data-i18n="bg_optional">背景圖（可選）</label>
            <div class="inline" style="gap:10px; flex-wrap:wrap;">
              <button id="btnPickBg" class="btn" data-i18n="select-bg">選擇背景圖</button>
              <button id="btnClearBg" class="btn" disabled data-i18n="clear">清除</button>
              <span id="bgName" class="muted mono" data-i18n="use_ori">(使用原圖）</span>
            </div>
            <input id="bgInput" type="file" accept="image/*" hidden />
          </div>


          <div class="field">
  <label data-i18n="size">尺寸</label>

  <!-- Preset -->
  <div class="inline" style="gap:10px; flex-wrap:wrap;">
    <select id="sizePreset" style="min-width:220px;">
      <option value="free" selected data-i18n="custom">自訂</option>
      <option value="fb_1_91_1">FB  1.91:1（1200×630）</option>

      <option value="ig_1_1">IG 1:1（1080×1080）</option>
      <option value="ig_4_5">IG 4:5（1080×1350）</option>
      <option value="ig_9_16">IG / Reels 9:16（1080×1920）</option>

      <option value="ar_16_9">16:9（1920×1080）</option>
      <option value="ar_4_3">4:3（1600×1200）</option>
      <option value="ar_3_4">3:4（1200×1600）</option>
    </select>

    <label class="inline muted" style="gap:8px; user-select:none;">
      <input id="mirror" type="checkbox" data-i18n="horizontal"/>
      Mirror（左右鏡像）
    </label>
  </div>

  <!-- Manual size -->
  <div class="inline" style="margin-top:10px;">
    <input id="w" type="number" value="1920" min="1" />
    <span class="muted">×</span>
    <input id="h" type="number" value="1080" min="1" />
  </div>
</div>

          <div class="field">
            <label>Blur</label>
            <input id="blur" type="range" min="0" max="80" value="35" />
            <div class="muted mono"><span id="blurVal">35</span></div>
          </div>

          <div class="field">
            <label data-i18n="bg_dim">背景亮度（壓暗）</label>
            <input id="dim" type="range" min="0.2" max="1" step="0.05" value="0.8" />
            <div class="muted mono"><span id="dimVal">0.80</span></div>
          </div>

          <div class="field">
            <label data-i18n="bg_sat">背景飽和度（降飽和）</label>
            <input id="sat" type="range" min="0" max="1.5" step="0.05" value="0.75" />
            <div class="muted mono"><span id="satVal">0.75</span></div>
          </div>

          <div class="field">
            <label data-i18n="output">輸出</label>
            <div class="inline">
              <select id="format">
                <option value="jpg" selected>JPG</option>
                <option value="png">PNG</option>
              </select>
              <input id="quality" type="number" value="90" min="1" max="100" />
              <span class="muted" data-i18n="quality">品質（JPG）</span>
            </div>
          </div>
        </div>
      </section>

      <!-- 右：即時預覽 + 輸出這張 + 進度 -->
      <section class="card">
        <h3 data-i18n="preview_title">即時預覽</h3>

        <div id="previewDrop" class="viewport" title="Drop an image here">
          <img id="previewImg" alt="preview" />
          <div id="previewEmpty" class="viewportEmpty" data-i18n="preview_empty">
            拖一張圖片到這裡預覽（也可以點一下選檔）
          </div>
        </div>

        <div class="previewActions">
          <button id="btnExportOne" class="btn primary" disabled data-i18n="export_one">輸出這張</button>
          <div class="mono muted" id="previewHint" data-i18n="preview_hint">拖一張圖片到上方預覽框</div>
        </div>

        <hr class="sep" />

        <h3 data-i18n="progress_title">進度</h3>

        <div class="progress">
          <div class="bar"><div id="barFill" class="fill" style="width:0%"></div></div>
          <div class="stats mono">
            <div><span data-i18n="current">目前</span>：<span id="current" class="muted">—</span></div>
            <div><span data-i18n="done">完成</span>：<span id="done">0</span>/<span id="total">0</span></div>
            <div><span data-i18n="success">成功</span>：<span id="ok">0</span>　<span data-i18n="fail">失敗</span>：<span id="fail">0</span></div>
          </div>
        </div>

        <div id="log" class="log mono"></div>

        <!-- 隱藏的單張選檔：點預覽框會打開 -->
        <input id="imageInput" type="file" accept="image/*" hidden />
      </section>
    </main>
  </div>

  <!-- Fixed Ad (collapsible) -->
<div id="adDock" class="ad-dock" data-state="open" aria-label="Advertisement">
  <div class="ad-panel" role="region" aria-label="Ad panel">
    <div class="ad-badge">AD</div>

    <!-- 這裡之後替換成廣告碼/iframe/ins -->
    <div class="ad-slot">
  <ins class="adsbygoogle"
     style="display:block; width:100%; min-height:90px;"
     data-ad-client="ca-pub-1653119848077016"
     data-ad-slot="8466184852"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>

</div>



    <button id="adCollapse" class="ad-btn" aria-label="Collapse ad">✕</button>
  </div>

  <button id="adPill" class="ad-pill" aria-label="Expand ad">
    AD
  </button>
</div>

<footer class="footer" style="margin-top:40px;text-align:center;font-size:12px;color:#999">
  <a href="/about.html">About</a> ·
  <a href="/privacy.html">Privacy Policy</a> ·
  <a href="/terms.html">Terms</a>
</footer>



  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
</script>

  <!-- JSZip 用於批次 ZIP -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

  <script src="./i18n.js"></script>
  <script src="./app.js"></script>
</body>
</html>



